
<!-- <head>
  <meta http-equiv="X-UA-Compatible" content="IE=edge">

  <script src="/vendor/jquery-3.0.0.js"></script>
  <script defer src="/scripts/resources.js"></script>
</head> --> -->

  <%- include('partials/_header.ejs') %>
      <main>
        <h1 class="title-header">Resources</h1>
        <section class="resources-main">
          <% resources.forEach(resource=> { %>
            <% const matchingCategory=categories.find(category=> category.id === resource.id); %>
              <% const matchingAvgRating=avgRatings.find(avgRating=> avgRating.id === resource.id); %>
                <a href="/resources/<%= resource.id %>" class="resource-card-link">
                  <div class="resource-card">
                    <div class="card-content">
                      <div class="resource-card-title">
                        <%= resource.title %>
                      </div>
                      <img src="<%= resource.thumbnail_url %>" alt="thumbnail image" class="thumbnail_img" />
                    </div>
                    <div class="category">
                      <%= matchingCategory.topic %>
                    </div>
                    <% if (matchingAvgRating) { %>

                      <% if (matchingAvgRating.avg_rating==='5' ) { %>
                        <img src="/docs/5 stars.svg" />
                        <% } else if (matchingAvgRating.avg_rating==='4' ) { %>
                          <img src="/docs/4 stars.svg" />
                          <% } else if (matchingAvgRating.avg_rating==='3' ) { %>
                            <img src="/docs/3 stars.svg" />
                            <% } else if (matchingAvgRating.avg_rating==='2' ) { %>
                              <img src="/docs/2 stars.svg" />
                              <% } else if (matchingAvgRating.avg_rating==='1' ) { %>
                                <img src="/docs/1 star.svg" />

                                <% } } else { %>
                                  <div class="avg-rating">No Ratings</div>
                                  <% } %>

                  </div>
                </a>
                <% }); %>
        </section>
      </main>
</body>

</html>
